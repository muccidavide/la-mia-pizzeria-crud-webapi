@{
    ViewData["Title"] = "Home Page";
    Layout = "_MyLayout";

}



<div class="text-center m-auto">
    <h1>Pizzeria da Davide</h1>
    <div>
        <input type="text" class="input-form js_search" />
    </div>
    <div class="js_loading">Loading...</div>
    <div class="js_no_pizza d-none">
    </div>
    <div class="js_pizza_table text-center m-auto row row-cols-1 row-cols-md-2 row-cols-lg-3">
    </div>
</div>

<script type="text/javascript">
    getPizza("");

    document.querySelector(".js_search").addEventListener('keyup', searchPizza);

    function searchPizza(e){
        let title = this.value;

        getPizza(title)
    }

    function getPizza(title){

        axios.get('/api/pizza/', {
            params:{
                title:title
            }
        }).then(
            result => {
                console.log(result);

                document.querySelector('.js_loading').classList.add('d-none');
                if (result.data.length == 0) {
                    document.querySelector('.js_no_pizza').classList.remove('d-none');
                    document.querySelector('.js_pizza_table').classList.add('d-none');
                }
                document.querySelector('.js_no_pizza').classList.add('d-none');
                document.querySelector('.js_pizza_table').innerHTML = '';

                result.data.forEach(pizza => {

                    var url = '@Html.Raw(@Url.Action("Details", "Home"))/' + pizza.pizzaId;
                    //var url = '/menu/pizza/'+ pizza.pizzaId;

                    console.log('pizza', pizza);
                    document.querySelector('.js_pizza_table').innerHTML +=
                        `<div class="p-3">
                             <div class="pizza_menu card col mb-3  p-2 ">
                                                 <a href="${url}" >
                           <img class="card-img-top" width="100" src="${pizza.image}" />
                               </a>
                            <div class="card-body text-black">
                                <h2>${pizza.name}</h3>
                                <p>${pizza.description}</p>
                                <p>${pizza.price} €</p>

                                </div>
                        </div>
                            </div>
                            `;
                })
            }
        ).catch(
            error => {
                console.log(error)
            }
        )


    }
   

</script>